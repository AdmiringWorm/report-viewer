"use strict";var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};requirejs.config({map:{"*":{"highlight.js":"highlightjs"}},paths:{bootstrap:"https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.1/js/bootstrap.bundle.min",diff:"https://cdnjs.cloudflare.com/ajax/libs/jsdiff/5.0.0/diff.min",jquery:"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min",knockout:"https://cdnjs.cloudflare.com/ajax/libs/knockout/3.5.1/knockout-latest.min",text:"https://cdnjs.cloudflare.com/ajax/libs/require-text/2.0.12/text.min",highlightjs:"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min","markdown-it":"https://cdnjs.cloudflare.com/ajax/libs/markdown-it/12.3.2/markdown-it.min"}}),requirejs(["knockout-configure"],()=>requirejs(["index"])),define("status-type",["require","exports"],function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.StatusType=void 0,(e=e.StatusType||(e.StatusType={}))[e.Success=0]="Success",e[e.Failed=1]="Failed",e[e.Inconclusive=2]="Inconclusive",e[e.NotRun=3]="NotRun"}),define("viewModels/log-viewmodel",["require","exports","knockout"],function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.LogViewModel=void 0;e.LogViewModel=class{constructor(t,e=0){var s;this.language=(0,i.pureComputed)(()=>{var t;switch(null==(t=this.type())?void 0:t.toLowerCase()){case"command":case"terminal":return"console";case"odata":case"xml":return"xml";default:return"plaintext"}},this),this.title=(0,i.observable)(null!=(s=null==t?void 0:t.title)?s:""),this.description=(0,i.observable)(null!=(s=null==t?void 0:t.details)?s:""),this.context=(0,i.observable)(null!=(s=null==t?void 0:t.context)?s:""),this.content=(0,i.observable)(null!=(s=null==t?void 0:t.content)?s:"No Content"),this.type=(0,i.observable)(null!=(s=null==(s=null==t?void 0:t.type)?void 0:s.toLowerCase())?s:"other"),void 0===(null==t?void 0:t.status)?(s=null!=(s=null==t?void 0:t.success)?s:0==e,this.status=(0,i.observable)(s?0:1)):this.status=(0,i.observable)(null!=(s=null==t?void 0:t.status)?s:e)}}}),define("viewModels/dialog-viewmodel",["require","exports","diff","knockout"],function(t,e,s,i){Object.defineProperty(e,"__esModule",{value:!0}),e.DialogViewModel=void 0;e.DialogViewModel=class{constructor(t,e){this._allLogs=(0,i.observableArray)([]),this.left=(0,i.observable)(),this.right=(0,i.observable)(),this.title=(0,i.observable)(""),this.leftLogs=(0,i.computed)(()=>i.utils.arrayFilter(this._allLogs(),t=>this.right()!=t),this),this.rightLogs=(0,i.computed)(()=>i.utils.arrayFilter(this._allLogs(),t=>void 0!==this.left()&&this.left()!=t||void 0===this.left()&&this.right()==t),this),this.diff=(0,i.computed)(()=>{var t=null!=(t=null==(t=this.left())?void 0:t.content())?t:"",e=null!=(e=null==(e=this.right())?void 0:e.content())?e:"",t=(0,s.createPatch)("comparison",t,e),e=Diff2Html.parse(t);return Diff2Html.html(e,{outputFormat:"side-by-side",drawFileList:!1})}),this.title(t),this._allLogs(e),0<e.length&&this.left(e[0]),1<e.length&&this.right(e[1])}}}),define("viewModels/status-viewmodel",["require","exports","knockout"],function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.StatusViewModel=void 0;e.StatusViewModel=class{constructor(t=0,e=0,s=0){this.total=(0,i.observable)(t),this.success=(0,i.observable)(e),this.failed=(0,i.observable)(s)}reset(){this.total(0),this.success(0),this.failed(0)}}}),define("viewModels/test-view-model",["require","exports","knockout","viewModels/log-viewmodel"],function(t,e,o,l){Object.defineProperty(e,"__esModule",{value:!0}),e.TestViewModel=void 0;e.TestViewModel=class{constructor(t){var e;if(this.name=(0,o.observable)(null!=(e=null==t?void 0:t.name)?e:""),this.command=(0,o.observable)(null!=(e=null==t?void 0:t.command)?e:""),this.details=(0,o.observable)(null!=(e=null==t?void 0:t.details)?e:""),void 0===(null==t?void 0:t.status)?(e=null==(e=null==t?void 0:t.success)||e,this.status=(0,o.observable)(e?0:1)):this.status=(0,o.observable)(null!=(e=null==t?void 0:t.status)?e:0),this.logs=(0,o.observableArray)([]),null!=t&&t.logs)for(const i of t.logs){void 0===i.status?i.success||0!==this.status()||this.status(1):2!==i.status&&3!==i.status||0!==this.status()?1===i.status&&1!==this.status()&&this.status(i.status):this.status(2);var s=new l.LogViewModel(i);this.logs.push(s)}}}}),define("viewModels/main-viewmodel",["require","exports","knockout","viewModels/dialog-viewmodel","viewModels/status-viewmodel","viewModels/test-view-model"],function(t,e,s,a,i,n){Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(){this.title=(0,s.observable)("No JSON Data Loaded"),this.description=(0,s.observable)("Use the local JSON File button to browse to a JSON file to use!"),this.isLoading=(0,s.observable)(!0),this.status=(0,s.observable)(new i.StatusViewModel),this.showSuccessful=(0,s.observable)(!0),this.showFailed=(0,s.observable)(!0),this.showNotes=(0,s.observable)(!1),this.tests=(0,s.observableArray)([]),this.selectedTest=(0,s.observable)(new a.DialogViewModel("NO TESTS",[])),this.openDiffDialog=t=>{t=new a.DialogViewModel(t.name(),t.logs());this.selectedTest(t)},this.filteredTests=(0,s.computed)(()=>s.utils.arrayFilter(this.tests(),t=>this.showSuccessful()&&0===t.status()||this.showFailed()&&1===t.status()||2===t.status()||3===t.status()),this),this.notes=(0,s.observableArray)([]),this.loadLocalJson=t=>{if(t){const s=t.target;if(s.files&&0!==s.files.length&&s.files[0]){this.isLoading(!0),this.updateData({});const e=new FileReader;e.onload=t=>{t=null==(t=t.target)?void 0:t.result;if(t&&"string"==typeof t){try{var e=JSON.parse(t);this.updateData(e),s.value=""}catch(t){alert("Unable to parse JSON. Was the data given a JSON file?\n"+t)}this.isLoading(!1)}else this.isLoading(!1)},e.onerror=t=>{alert("Failed to read file:\n"+t),this.isLoading(!1)},e.readAsText(s.files[0])}}},this.openDiffDialog.bind(this)}updateData(t){var e;if(this.title(null!=(e=t.title)?e:""),this.description(null!=(e=null!=(e=t.description)?e:t.details)?e:""),this.selectedTest(new a.DialogViewModel("NO TESTS",[])),t.notes)for(const i of t.notes)this.notes.push(i);else this.notes([]);if(t.tests){const o=this.status();for(const l of t.tests){o.total(o.total()+1);var s=new n.TestViewModel(l);this.tests.push(s),0===s.status()?o.success(o.success()+1):1===s.status()&&o.failed(o.failed()+1)}}else this.tests([]),this.status().reset()}}}),define("index",["require","exports","knockout","viewModels/main-viewmodel"],function(t,e,s,i){Object.defineProperty(e,"__esModule",{value:!0});e=new(i=__importDefault(i)).default;(0,s.applyBindings)(e,document.getElementById("htmlDocument")),e.isLoading(!1)}),define("components/highlight",["require","exports","knockout","highlight.js"],function(t,e,s){Object.defineProperty(e,"__esModule",{value:!0}),e.HighlightComponent=void 0;e.HighlightComponent=class i{constructor(t){this.text=(0,s.observable)(""),this.language=(0,s.observable)(""),this.html=(0,s.computed)(()=>{let t;return(t=this.language()?hljs.highlight(this.text(),{language:this.language(),ignoreIllegals:!0}):hljs.highlightAuto(this.text()))?t.value:this.text()},this),t.text&&this.text(t.text),t.language&&this.language(t.language)}static register(){s.components.register("highlightItem",{viewModel:i,template:'<pre><code data-bind="html: html"></code></pre>'})}}}),define("components/markdown",["require","exports","markdown-it","knockout","highlight.js"],function(t,e,s,i,o){Object.defineProperty(e,"__esModule",{value:!0}),e.MarkdownComponent=void 0,s=__importDefault(s),o=__importDefault(o);const l=new s.default({html:!1,typographer:!0,linkify:!0,xhtmlOut:!0,highlight:(t,e)=>{if(e&&o.default.getLanguage(e))try{return o.default.highlight(t,{language:e}).value}catch(t){}else try{return o.default.highlightAuto(t).value}catch(t){}return""}});e.MarkdownComponent=class a{constructor(t){this.text=(0,i.observable)(""),this.html=(0,i.pureComputed)(()=>l.render(this.text()),this),this.text(t.text)}static register(){i.components.register("markdownItem",{viewModel:a,template:'<div data-bind="html: html"></div>'}),i.components.register("markdownNoteItem",{viewModel:a,template:'<li class="list-group-item border-1 border-dark mb-2 rounded" data-bind="html: html"></li>'})}}}),define("components/status-icon",["require","exports","knockout"],function(t,e,s){Object.defineProperty(e,"__esModule",{value:!0}),e.StatusIcon=void 0;e.StatusIcon=class i{constructor(t){this.status=(0,s.observable)(0),void 0===t.status?this.status(t.success?0:1):this.status(t.status)}static register(){s.components.register("statusIcon",{viewModel:i,template:`<i class="fa-solid" data-bind="css: {
                'fa-check text-success': status() === 0,
                'fa-xmark text-danger': status() === 1,
                'fa-exclamation text-warning': status() === 2 || status() === 3
            }"></i>`})}}}),define("knockout-configure",["require","exports","components/highlight","components/markdown","components/status-icon"],function(t,e,s,i,o){Object.defineProperty(e,"__esModule",{value:!0}),i.MarkdownComponent.register(),s.HighlightComponent.register(),o.StatusIcon.register()});